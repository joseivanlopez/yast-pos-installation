<?xml version="1.0"?>
<!DOCTYPE productDefines SYSTEM "/usr/share/YaST2/control/control.dtd">
<productDefines xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns">
    <textdomain>control-SLEPOS</textdomain>

    <workflows config:type="list">

	<!-- Workflow for the Add-On installation
	     on a running system -->
        <workflow>
            <defaults>
                <enable_back>no</enable_back>
                <enable_next>no</enable_next>
            </defaults>

            <stage>normal</stage>
            <mode>installation,normal</mode>

            <modules config:type="list">
                <module>
                    <label>Server Type Selection</label>
                    <name>slepos_server_selection</name>
                    <enable_back>no</enable_back>
                    <enable_next>yes</enable_next>
                </module>
                <module>
                    <label>Install Software</label>
                    <name>inst_rpmcopy</name>
                    <enable_back>yes</enable_back>
                    <enable_next>yes</enable_next>
                </module>
                <module>
                    <label>Data Migration</label>
                    <name>slepos_data_migration</name>
                    <enable_back>yes</enable_back>
                    <enable_next>yes</enable_next>
                </module>
            </modules>
	</workflow>
    </workflows>

    <update>

	<workflows config:type="list">
	    <!-- Workflow for the Update process -->
	    <workflow>
        	<defaults>
            	    <enable_back>yes</enable_back>
            	    <enable_next>yes</enable_next>
        	</defaults>

		<!-- Second Stage - Update -->
        	<stage>continue</stage>
        	<mode>update</mode>

		<!-- Update: Insert -->
		<insert_modules config:type="list">
		    <insert_module>
			<before>congratulate</before>
			<modules config:type="list">
			    <module>
				<label>Data Migration</label>
				<name>slepos_data_migration</name>
                		<enable_back>yes</enable_back>
                		<enable_next>yes</enable_next>
			    </module>
			</modules>
		    </insert_module>
		</insert_modules>
    	    </workflow>

	    <!-- Workflow for the New installation - First Stage -->
	    <workflow>
        	<defaults>
            	    <enable_back>yes</enable_back>
            	    <enable_next>yes</enable_next>
        	</defaults>

		<!-- First Stage - Installation -->
        	<stage>initial</stage>
        	<mode>installation</mode>

		<!-- Installation: Insert -->
		<insert_modules config:type="list">
		    <insert_module>
			<before>proposal</before>
			<modules config:type="list">
			    <module>
				<label>Server Type Selection</label>
				<name>slepos_server_selection</name>
                		<enable_back>yes</enable_back>
                		<enable_next>yes</enable_next>
			    </module>
			</modules>
		    </insert_module>
		</insert_modules>
    	    </workflow>

	</workflows>
    </update>
</productDefines>
